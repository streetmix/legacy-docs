

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Segment definitions &mdash; Streetmix  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/sphinx_prompt_css.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="Environs definitions" href="../environs/" />
    <link rel="prev" title="Integration testing" href="../tests/frontend/integration/" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../" class="icon icon-home"> Streetmix
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../contributing/">Contributing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">Technical manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../installing-streetmix/">Installing Streetmix</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/">Project organization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../csp/">Content Security Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tests/">Tests</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Segment definitions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#glossary">Glossary</a></li>
<li class="toctree-l3"><a class="reference internal" href="#types-of-segment-components">Types of segment components</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lanes">1. Lanes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vehicles">2. Vehicles</a></li>
<li class="toctree-l4"><a class="reference internal" href="#objects">3. Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="#markings">4. Markings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#components-definitions">Components definitions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id1">Segment definitions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#additional-segment-properties">Additional segment properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#properties">Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#variants">Variants</a></li>
<li class="toctree-l4"><a class="reference internal" href="#segment-transitions">Segment transitions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../environs/">Environs definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/">Helpers and utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../support/">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guidebook/">Guidebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contact/">Contact</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../">Streetmix</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../">Docs</a> &raquo;</li>
        
          <li><a href="../">Technical manual</a> &raquo;</li>
        
      <li>Segment definitions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/technical/segment-definitions.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last"><strong>(August 2021) Streetmix documentation has now moved!</strong> Please update your bookmarks to <a class="reference external" href="https://docs.streetmix.net/">https://docs.streetmix.net/</a>.</p>
</div>
<div class="section" id="segment-definitions">
<h1>Segment definitions<a class="headerlink" href="#segment-definitions" title="Permalink to this headline">¶</a></h1>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p>This page is a work in progress. This is a draft specification of Streetmix’s forthcoming segment definition schema. For documentation related to the legacy specification, see <a class="reference external" href="https://github.com/streetmix/streetmix/blob/main/assets/scripts/segments/README.md">this file</a>.</p>
<p class="last">The schema and structure described here is subject to change and evolve.</p>
</div>
<div class="section" id="glossary">
<h2>Glossary<a class="headerlink" href="#glossary" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>segment</dt>
<dd><p class="first"><strong>Segments</strong> are the building blocks of a street. A street cross section is composed of a sequence of non-overlapping segments. Note that a <em>segment</em> in this context is not the same as a <em>street segment</em>, which is a length of a street with an arbitrary start and end point (but usually at intersections).</p>
<p class="last">Segments are defined as an assembly of various <em>segment components</em>.</p>
</dd>
<dt>segment component</dt>
<dd>Segments are made up of <strong>components</strong>. We will call them <em>segment components</em> to differentiate them from the generic concept of a <em>component</em>, which might be used in other contexts (for instance, a <em>React component</em>).</dd>
<dt>sprite</dt>
<dd>A <strong>sprite</strong> is the illustration used to represent a <em>segment component</em> visually.</dd>
</dl>
</div>
<div class="section" id="types-of-segment-components">
<h2>Types of segment components<a class="headerlink" href="#types-of-segment-components" title="Permalink to this headline">¶</a></h2>
<p>There are four types of segment components. Segment components have <strong>profiles</strong>, based on its <strong>type</strong>, that describe its general characteristics.</p>
<div class="section" id="lanes">
<h3>1. Lanes<a class="headerlink" href="#lanes" title="Permalink to this headline">¶</a></h3>
<p><strong>Lanes are ground-level zones of street activity.</strong> Common examples of lanes include <em>vehicle travel lanes</em>, which are typically allocated to automobiles and bicycles, paved with asphalt, clear of obstructions, and allow for high speeds of travel, and <em>sidewalks</em>, which are typically allocated to pedestrian use, paved with concrete or other decorative paving material, and allows for lower speeds of travel.</p>
<p>Lanes have a consistent width, but a variable length, aligned along the street’s centerline axis. Lanes do not have to be consistently parallel with the street axis, nor does it need to be continuous along the entire length of a street segment. While lanes are assumed to have a consistent width, it is possible for lanes to deviate along its length.</p>
<p>Lanes are not required to permit vehicular travel. Some may be designated for parked vehicles (<em>parking lane</em>), or be clear of vehicles altogether (<em>sidewalk furnishing zone</em>, <em>planting strip</em>).</p>
<p>Lanes are not required to have the same function at all times. Some lanes change function throughout the day, such as parking lanes that turn into travel lanes during rush hour. Some lanes may allow a mix of functions throughout, such as a parking lane where some spaces are occupied by cafe seating.</p>
<p>Lanes have the following defined characteristics:</p>
<ul class="simple">
<li><strong>Surface material</strong>, such as concrete, asphalt, brick, permeous paving, etc. This informs</li>
<li><strong>Surface height</strong>, a +/- delta value from “grade” level, which is defined as zero. The “grade” level is the top of the surface used for vehicular travel. A height value of +1 is the height of a standard sidewalk curb lip. Note that this value is _not_ a real-world engineering measurement, and visual rendering of surface height in Streetmix is illustrative.</li>
<li><strong>Intent</strong>, which specifies allowed functionality. Example values may include <em>pedestrian</em>, <em>fast vehicular</em>, <em>slow vehicular</em>, <em>parked vehicular</em>, <em>recreational</em>, <em>unknown</em>, or <em>any</em>. This may be overridden at the <em>segment component</em> level.</li>
<li><strong>Minimum desired speed</strong>, for <em>intents</em> that allow vehicular travel, set the lowest minimum desired speed. This may be overridden at the <em>segment component</em> level.</li>
<li><strong>Maximum desired speed</strong>, for <em>intents</em> that allow vehicular travel, set the highest maximum desired speed. This may be overridden at the <em>segment component</em> level.</li>
</ul>
<p>Segments must have one lane component.</p>
</div>
<div class="section" id="vehicles">
<h3>2. Vehicles<a class="headerlink" href="#vehicles" title="Permalink to this headline">¶</a></h3>
<p><strong>Vehicles are modes of transportation.</strong></p>
<ul class="simple">
<li>Vehicles. This defines things that can travel in a direction of motion (e.g. pedestrians, bikes, scooters, cars, trucks, magic flying carpet)</li>
<li><strong>Label</strong></li>
<li><strong>Weight</strong></li>
<li><strong>Footprint</strong> (square meters)</li>
<li><strong>Speed</strong> (maximum)</li>
<li><strong>Emissions</strong></li>
<li><strong>Capacity</strong></li>
<li><strong>Level of automation</strong></li>
</ul>
</div>
<div class="section" id="objects">
<h3>3. Objects<a class="headerlink" href="#objects" title="Permalink to this headline">¶</a></h3>
<p><strong>Objects, also known as furniture, are stationary items.</strong> Examples include <em>benches</em>, <em>parklets</em>, <em>trees</em>, and <em>signage</em>.</p>
<p>Objects can be a single-instance item, like signage, which usually occur once in a specific spot. Objects can also repeat along a lane’s length, such as street trees, which might be planted every 10 m or so. Note that repeating object spacing are rough guidelines for illustrative purposes and may not reflect actual spacing in reality, because of real-world physical constraints.</p>
<p>One handy rule of thumb for determining if something should be an <em>object</em> is to consider whether a single instance of it can be mapped with a point (that is, a latitude/longitude coordinate pair) and still have meaning. Ob</p>
<p>Objects have the following defined characteristics:</p>
<ul class="simple">
<li><strong>Label</strong></li>
</ul>
</div>
<div class="section" id="markings">
<h3>4. Markings<a class="headerlink" href="#markings" title="Permalink to this headline">¶</a></h3>
<p><strong>Markings a fourth “special” category that defines various ways lanes can be marked.</strong>  An example of a <em>marking</em> are lane striping. Markings are conceptually similar to objects, in that they are stationary, and can possibly repeat along the length of the lane. However, they’re different in that markings are really symbols. Their physical expressions are a side effect.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Markings are a transitional category which emerged because it was necessary to find a bridge between the original segment specification and the new one. This may go away in favor of splitting the different types of markings between the <em>lane</em> segment component type and a new property, <em>segment transitions</em>.</p>
</div>
</div>
<div class="section" id="components-definitions">
<h3>Components definitions<a class="headerlink" href="#components-definitions" title="Permalink to this headline">¶</a></h3>
<p>Segment components are defined in <a class="reference external" href="https://github.com/streetmix/streetmix/blob/main/assets/scripts/segments/components.json">https://github.com/streetmix/streetmix/blob/main/assets/scripts/segments/components.json</a></p>
</div>
</div>
<div class="section" id="id1">
<h2>Segment definitions<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="admonition-background admonition">
<p class="first admonition-title">Background</p>
<p>Currently every object type (what we call “segments” internally) is defined here: <a class="reference external" href="https://github.com/streetmix/streetmix/blob/main/assets/scripts/segments/info.json">https://github.com/streetmix/streetmix/blob/main/assets/scripts/segments/info.json</a></p>
<p>Its basic structure is very minimal. For every segment we have some properties attached to it (e.g. its display name, minimum / maximum recommended width, if any, and so on), and we also specify which image sprites represent the segment graphically. Each segment may also have variants, which come with its own properties.</p>
<p>The problem with this format is that each segment hard-codes its own definitions for everything. For example, both drive lanes and parking lanes define what a car is, redundantly. This makes it very hard for segments to represent real-world flexibility. If we wanted all segments capable of supporting a bicycle to have a bicycle option, then each segment needs to duplicate the details of the bicycle.</p>
<p class="last">Finally, there is the problem variants. Each segment variant combines with other varients so the total number of variants are multiplied together. This means each time a new variant is added, the data multiplies exponentially. Most segments have two variants, which is manageable. Once you have three or more, it’s unworkable. It’s one of the main reasons why we resisted putting in raised bike lanes despite it being one of the most requested segment features over the last few years. Doing so raised the complexity of our data, and so we need to consider how to implement it in a better way.</p>
</div>
<p>Segments are now defined as an assemblage of components, with additional properties. See here: <a class="reference external" href="https://github.com/streetmix/streetmix/blob/main/assets/scripts/segments/segment-lookup.json">https://github.com/streetmix/streetmix/blob/main/assets/scripts/segments/segment-lookup.json</a></p>
<div class="section" id="additional-segment-properties">
<h3>Additional segment properties<a class="headerlink" href="#additional-segment-properties" title="Permalink to this headline">¶</a></h3>
<p>Once a segment has been constructed out of component parts, it can define additional information.</p>
</div>
<div class="section" id="properties">
<h3>Properties<a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>Label</strong>. Name of the segment.</li>
</ul>
<p>Properties may be editable by the user.</p>
</div>
<div class="section" id="variants">
<h3>Variants<a class="headerlink" href="#variants" title="Permalink to this headline">¶</a></h3>
<p>Variants are toggles that slightly change the appearance or behavior of the segment.</p>
</div>
<div class="section" id="segment-transitions">
<h3>Segment transitions<a class="headerlink" href="#segment-transitions" title="Permalink to this headline">¶</a></h3>
<p><strong>Adjacent segment transitions</strong> define what happens when the edge of one segment abuts the edge of another segment.</p>
<p><strong>Connecting segment transitions</strong> define what happens when the end of one segment’s <em>lane</em> is connected to another segment
‘s <em>lane</em>.</p>
<p>Note that segments cannot overlap in this specification, so if a segment overlap exists, it is redefined to adjacent, and the adjacent transition applies.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../environs/" class="btn btn-neutral float-right" title="Environs definitions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../tests/frontend/integration/" class="btn btn-neutral float-left" title="Integration testing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Streetmix LLC

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>